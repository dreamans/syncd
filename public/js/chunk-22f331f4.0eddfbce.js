(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22f331f4"],{"24d2":function(e,t,a){"use strict";a.d(t,"j",function(){return i}),a.d(t,"q",function(){return r}),a.d(t,"h",function(){return s}),a.d(t,"e",function(){return c}),a.d(t,"c",function(){return o}),a.d(t,"l",function(){return l}),a.d(t,"a",function(){return d}),a.d(t,"f",function(){return u}),a.d(t,"k",function(){return p}),a.d(t,"i",function(){return b}),a.d(t,"p",function(){return m}),a.d(t,"g",function(){return f}),a.d(t,"m",function(){return h}),a.d(t,"d",function(){return _}),a.d(t,"b",function(){return g}),a.d(t,"n",function(){return v}),a.d(t,"o",function(){return j});var n=a("ead3");function i(e){return Object(n["b"])("/project/space/add",e)}function r(e){return Object(n["b"])("/project/space/update",e)}function s(e){return Object(n["a"])("/project/space/list",e)}function c(e){return Object(n["a"])("/project/space/detail",e)}function o(e){return Object(n["b"])("/project/space/delete",e)}function l(e){return Object(n["a"])("/project/member/search",e)}function d(e){return Object(n["b"])("/project/member/add",e)}function u(e){return Object(n["a"])("/project/member/list",e)}function p(e){return Object(n["b"])("/project/member/remove",e)}function b(e){return Object(n["b"])("/project/add",e)}function m(e){return Object(n["b"])("/project/update",e)}function f(e){return Object(n["a"])("/project/list",e)}function h(e){return Object(n["b"])("/project/switchstatus",e)}function _(e){return Object(n["a"])("/project/detail",e)}function g(e){return Object(n["b"])("/project/delete",e)}function v(e){return Object(n["b"])("/project/buildscript",e)}function j(e){return Object(n["b"])("/project/hookscript",e)}},6737:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.spaceId?a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"app-btn-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.switchSpaceHandler}},[e._v(e._s(e.$t("switch_project_space")))])],1),a("div",{staticClass:"app-btn-group",staticStyle:{"min-height":"30px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.spaceLoading,expression:"spaceLoading"}]},[a("h4",[e._v(e._s(this.spaceDetail.name))]),a("p",{staticClass:"app-description"},[e._v(e._s(this.spaceDetail.description))])])]),a("div",{staticClass:"app-divider"}),e.$root.CheckPriv(e.$root.Priv.PROJECT_USER_NEW)?[a("div",{staticClass:"app-btn-title"},[e._v(e._s(e.$t("add_new_member")))]),a("el-row",{staticClass:"app-btn-group"},[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",filterable:"",remote:"","loading-text":e.$t("looking_for_users"),"no-match-text":e.$t("user_not_found"),"remote-method":e.searchMemberHandler,loading:e.memberLoading,placeholder:e.$t("search_for_users_by_username_and_email")},model:{value:e.memberId,callback:function(t){e.memberId=t},expression:"memberId"}},e._l(e.memberSearchList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.username+" - "+e.email+" - "+e.role_name}})}),1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.addMemberHandler}},[e._v(e._s(e.$t("add")))])],1)],1)]:e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"app-table",attrs:{size:"medium",data:e.tableData}},[a("el-table-column",{attrs:{prop:"username",width:"220",label:e.$t("username")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.username?a("span",[e._v(e._s(t.row.username))]):a("span",{staticClass:"app-line-through"},[e._v("已删除")])]}}])}),a("el-table-column",{attrs:{prop:"email",width:"260",label:e.$t("email")}}),a("el-table-column",{attrs:{prop:"role_name",label:e.$t("role")}}),a("el-table-column",{attrs:{prop:"status",width:"100",label:e.$t("status")},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.status?a("span",{staticClass:"app-color-success"},[a("i",{staticClass:"iconfont icon-unlock"}),e._v(" "+e._s(e.$t("normal"))+"\n                    ")]):a("span",{staticClass:"app-color-error"},[a("i",{staticClass:"iconfont icon-lock"}),e._v(" "+e._s(e.$t("locking"))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:e.$t("operate"),width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$root.CheckPriv(e.$root.Priv.PROJECT_USER_DEL)?a("el-button",{staticClass:"app-danger",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){e.deleteHandler(t.row)}}},[e._v(e._s(e.$t("remove")))]):e._e()]}}])})],1),a("el-pagination",{staticClass:"app-pagination",attrs:{background:"",layout:"prev, pager, next","current-page":e.$root.Page,"page-size":e.$root.PageSize,total:e.$root.Total},on:{"current-change":e.currentChangeHandler,"update:currentPage":function(t){e.$set(e.$root,"Page",t)}}})],2):a("el-card",{attrs:{shadow:"never"}},[a("el-alert",{staticClass:"app-btn-group",attrs:{title:e.$t("prompt_message"),type:"info",closable:!1,description:e.$t("project_member_select_space_tips"),"show-icon":""}}),a("div",{staticClass:"app-btn-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.switchSpaceHandler}},[e._v(e._s(e.$t("select_project_space")))])],1),a("div",{staticClass:"app-divider"})],1),a("el-dialog",{attrs:{width:e.$root.DialogSmallWidth,visible:e.dialogSpaceVisible,title:e.$t("select_project_space")},on:{"update:visible":function(t){e.dialogSpaceVisible=t}}},[a("div",{staticStyle:{"padding-bottom":"50px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",placeholder:e.$t("select_project_space")},on:{change:e.selectSpaceHandler},model:{value:e.spaceId,callback:function(t){e.spaceId=t},expression:"spaceId"}},e._l(e.spaceList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:e.$root.Substr(t.name,50)}})}),1)],1)])],1)},i=[],r=a("24d2"),s=a("1c06"),c={data:function(){return{dialogSpaceVisible:!1,tableData:[],tableLoading:!1,spaceId:void 0,spaceLoading:!1,spaceList:[],spaceDetail:{},memberId:void 0,memberLoading:!1,memberSearchList:[],lastSearchTimer:null}},watch:{spaceId:function(){var e=this;this.spaceId&&(this.spaceLoading=!0,Object(r["e"])({id:this.spaceId}).then(function(t){e.spaceDetail=t,e.spaceLoading=!1}).catch(function(t){e.spaceLoading=!1}),this.$root.PageInit(),this.loadTableData())}},methods:{searchMemberHandler:function(e){var t=this;this.memberLoading=!0,clearTimeout(this.lastSearchTimer),this.lastSearchTimer=setTimeout(function(){Object(r["l"])({keyword:e}).then(function(e){e&&(t.memberSearchList=e),t.memberLoading=!1}).catch(function(e){t.memberLoading=!1})},1e3)},addMemberHandler:function(){var e=this;this.memberId?Object(r["a"])({member_id:this.memberId,space_id:this.spaceId}).then(function(t){e.memberId=void 0,e.memberSearchList=[],e.$message.success(e.$t("member_added_successfully")),e.$root.PageInit(),e.loadTableData()}).catch(function(t){s["a"].CODE_ERR_DATA_REPEAT==t.code&&e.$message.error(e.$t("member_already_exists_do_not_add_repeat"))}):this.$message.error(this.$t("search_and_select_users_before_adding"))},selectSpaceHandler:function(){this.dialogSpaceVisible=!1},switchSpaceHandler:function(){this.dialogSpaceVisible=!0},deleteHandler:function(e){var t=this;this.$root.ConfirmDelete(function(){Object(r["k"])({id:e.id}).then(function(e){t.$root.MessageSuccess(),t.$root.PageReset(),t.loadTableData()})})},currentChangeHandler:function(){this.loadTableData()},loadTableData:function(){var e=this;this.tableLoading=!0,Object(r["f"])({space_id:this.spaceId,offset:this.$root.PageOffset(),limit:this.$root.PageSize}).then(function(t){e.tableData=t.list,e.$root.Total=t.total,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1})},loadSpaceList:function(){var e=this;Object(r["h"])({offset:0,limit:999}).then(function(t){t.list&&(e.spaceList=t.list),e.initSpaceId()})},initSpaceId:function(){this.spaceList.length&&!this.spaceId&&(this.spaceId=this.spaceList[0].id)}},mounted:function(){this.loadSpaceList()}},o=c,l=a("2877"),d=Object(l["a"])(o,n,i,!1,null,null,null);d.options.__file="Member.vue";t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-22f331f4.0eddfbce.js.map