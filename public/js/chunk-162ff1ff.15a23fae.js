(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-162ff1ff"],{"24d2":function(e,t,o){"use strict";o.d(t,"j",function(){return r}),o.d(t,"q",function(){return i}),o.d(t,"h",function(){return a}),o.d(t,"e",function(){return l}),o.d(t,"c",function(){return c}),o.d(t,"l",function(){return u}),o.d(t,"a",function(){return p}),o.d(t,"f",function(){return s}),o.d(t,"k",function(){return d}),o.d(t,"i",function(){return m}),o.d(t,"p",function(){return f}),o.d(t,"g",function(){return b}),o.d(t,"m",function(){return _}),o.d(t,"d",function(){return g}),o.d(t,"b",function(){return j}),o.d(t,"n",function(){return y}),o.d(t,"o",function(){return h});var n=o("ead3");function r(e){return Object(n["b"])("/project/space/add",e)}function i(e){return Object(n["b"])("/project/space/update",e)}function a(e){return Object(n["a"])("/project/space/list",e)}function l(e){return Object(n["a"])("/project/space/detail",e)}function c(e){return Object(n["b"])("/project/space/delete",e)}function u(e){return Object(n["a"])("/project/member/search",e)}function p(e){return Object(n["b"])("/project/member/add",e)}function s(e){return Object(n["a"])("/project/member/list",e)}function d(e){return Object(n["b"])("/project/member/remove",e)}function m(e){return Object(n["b"])("/project/add",e)}function f(e){return Object(n["b"])("/project/update",e)}function b(e){return Object(n["a"])("/project/list",e)}function _(e){return Object(n["b"])("/project/switchstatus",e)}function g(e){return Object(n["a"])("/project/detail",e)}function j(e){return Object(n["b"])("/project/delete",e)}function y(e){return Object(n["b"])("/project/buildscript",e)}function h(e){return Object(n["b"])("/project/hookscript",e)}},3314:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",{attrs:{shadow:"never"}},[o("el-form",{ref:"formRef",staticClass:"app-form",attrs:{model:e.form,size:"medium","label-width":"130px"}},[o("el-form-item",{attrs:{label:e.$t("select_project_space"),prop:"space_id",rules:[{required:!0,message:e.$t("project_space_cannot_empty"),trigger:"blur"}]}},[o("el-select",{attrs:{filterable:"",placeholder:e.$t("please_input_keyword")},on:{change:e.changeSpaceHandler},model:{value:e.form.space_id,callback:function(t){e.$set(e.form,"space_id",t)},expression:"form.space_id"}},e._l(e.spaceList,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),o("el-form-item",{attrs:{label:e.$t("select_project"),prop:"project_id",rules:[{required:!0,message:e.$t("project_cannot_empty"),trigger:"blur"}]}},[o("el-select",{attrs:{filterable:"",placeholder:e.$t("please_input_keyword")},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.projectList,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),o("el-form-item",[o("el-button",{attrs:{icon:"el-icon-edit-outline\n",size:"small",type:"primary"},on:{click:e.openDialogHandler}},[e._v(e._s(e.$t("input_apply_order")))])],1)],1)],1),o("el-dialog",{attrs:{width:e.$root.DialogNormalWidth,title:e.$t("input_deploy_apply"),visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialogHandler}},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"app-dialog"},[o("el-form",{ref:"dialogRef",staticClass:"app-form",attrs:{model:e.dialogForm,size:"medium","label-width":"130px"}},[o("el-form-item",{attrs:{label:e.$t("project_name")}},[e._v("\n                        "+e._s(e.projectDetail.name)+"\n                    ")]),o("el-form-item",{attrs:{label:e.$t("apply_name"),prop:"name",rules:[{required:!0,message:e.$t("name_cannot_empty"),trigger:"blur"}]}},[o("el-input",{attrs:{placeholder:e.$t("please_input_apply_name"),autocomplete:"off"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),o("el-form-item",{attrs:{label:e.$t("deploy_mode")}},[1==e.projectDetail.deploy_mode?o("span",[o("i",{staticClass:"iconfont icon-branch"}),e._v(" - "+e._s(e.$t("branch_deploy"))),e.projectDetail.repo_branch?[e._v(" - "),o("strong",[e._v(e._s(e.projectDetail.repo_branch))]),e._v(" "+e._s(e.$t("branch")))]:e._e()],2):e._e(),2==e.projectDetail.deploy_mode?o("span",[o("i",{staticClass:"iconfont icon-tag"}),e._v(" "+e._s(e.$t("tag_deploy"))+"\n                        ")]):e._e()]),2==e.projectDetail.deploy_mode?o("el-form-item",{attrs:{label:e.$t("tag_name"),prop:"branch_name",rules:[{required:!0,message:e.$t("tag_name_cannot_empty"),trigger:"blur"}]}},[o("el-input",{staticClass:"app-input-mini",attrs:{placeholder:e.$t("please_input_tag_name"),autocomplete:"off"},model:{value:e.dialogForm.branch_name,callback:function(t){e.$set(e.dialogForm,"branch_name",t)},expression:"dialogForm.branch_name"}})],1):e._e(),1==e.projectDetail.deploy_mode&&""==e.projectDetail.repo_branch?o("el-form-item",{attrs:{label:e.$t("branch_name"),prop:"branch_name",rules:[{required:!0,message:e.$t("branch_name_cannot_empty"),trigger:"blur"}]}},[o("el-input",{staticClass:"app-input-mini",attrs:{placeholder:e.$t("please_input_branch_name"),autocomplete:"off"},model:{value:e.dialogForm.branch_name,callback:function(t){e.$set(e.dialogForm,"branch_name",t)},expression:"dialogForm.branch_name"}})],1):e._e(),1==e.projectDetail.deploy_mode?o("el-form-item",{attrs:{label:e.$t("commit_version"),prop:"commit_version"}},[o("el-input",{staticClass:"app-input-normal",attrs:{placeholder:e.$t("please_input_commit_version"),autocomplete:"off"},model:{value:e.dialogForm.commit_version,callback:function(t){e.$set(e.dialogForm,"commit_version",t)},expression:"dialogForm.commit_version"}})],1):e._e(),o("el-form-item",{attrs:{label:e.$t("deploy_illustrate"),prop:"description",rules:[{required:!0,message:e.$t("deploy_illustrate_cannot_empty"),trigger:"blur"}]}},[o("el-input",{attrs:{rows:4,type:"textarea",placeholder:e.$t("please_input_deploy_illustrate"),autocomplete:"off"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1),o("el-form-item",{attrs:{label:e.$t("rollback_apply"),prop:"rollback_id"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("please_input_keyword")},model:{value:e.dialogForm.rollback_id,callback:function(t){e.$set(e.dialogForm,"rollback_id",t)},expression:"dialogForm.rollback_id"}},e._l(e.rollbackList,function(e){return o("el-option",{key:e.id,attrs:{label:"(ID:"+e.id+") "+e.name,value:e.id}})}),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:e.closeDialogHandler}},[e._v(e._s(e.$t("cancel")))]),o("el-button",{attrs:{loading:e.btnLoading,size:"small",type:"primary"},on:{click:e.dialogSubmitHandler}},[e._v(e._s(e.$t("enter")))])],1)],1)])],1)},r=[],i=(o("7f7f"),o("24d2")),a=o("41db"),l={data:function(){return{form:{space_id:void 0,project_id:void 0},spaceList:[],projectList:[],rollbackList:[],dialogVisible:!1,dialogLoading:!1,dialogForm:{},btnLoading:!1,projectDetail:{}}},methods:{dialogSubmitHandler:function(){var e=this;this.$refs.dialogRef.validate(function(t){if(!t)return!1;e.btnLoading=!0;var o={project_id:e.form.project_id,space_id:e.form.space_id,name:e.dialogForm.name,branch_name:e.dialogForm.branch_name,description:e.dialogForm.description,commit_version:e.dialogForm.commit_version,rollback_id:e.dialogForm.rollback_id};Object(a["h"])(o).then(function(t){e.$alert(e.$t("deploy_apply_submit_success"),e.$t("submit_success"),{type:"success",confirmButtonText:e.$t("enter"),callback:function(t){e.closeDialogHandler(),e.$router.push({name:"deployDeploy"})}}),e.btnLoading=!1}).catch(function(t){e.btnLoading=!1})})},openDialogHandler:function(){var e=this;this.$refs.formRef.validate(function(t){if(!t)return!1;Object(a["f"])({id:e.form.project_id}).then(function(t){e.projectDetail=t,e.dialogVisible=!0}),Object(a["g"])({id:e.form.project_id}).then(function(t){t&&(e.rollbackList=t)})})},closeDialogHandler:function(){this.dialogVisible=!1},changeSpaceHandler:function(e){this.form.project_id=void 0,this.loadProjectList(e)},loadSpaceList:function(){var e=this;Object(i["h"])({offset:0,limit:999}).then(function(t){t.list&&(e.spaceList=t.list)})},loadProjectList:function(e){var t=this;Object(i["g"])({space_id:e,offset:0,limit:999}).then(function(e){e.list&&(t.projectList=e.list)})}},mounted:function(){this.loadSpaceList()}},c=l,u=o("2877"),p=Object(u["a"])(c,n,r,!1,null,null,null);p.options.__file="Apply.vue";t["default"]=p.exports},"41db":function(e,t,o){"use strict";o.d(t,"f",function(){return r}),o.d(t,"h",function(){return i}),o.d(t,"e",function(){return a}),o.d(t,"d",function(){return l}),o.d(t,"b",function(){return c}),o.d(t,"a",function(){return u}),o.d(t,"i",function(){return p}),o.d(t,"c",function(){return s}),o.d(t,"g",function(){return d}),o.d(t,"j",function(){return m}),o.d(t,"k",function(){return f}),o.d(t,"l",function(){return b}),o.d(t,"n",function(){return _}),o.d(t,"o",function(){return g}),o.d(t,"p",function(){return j}),o.d(t,"m",function(){return y});var n=o("ead3");function r(e){return Object(n["a"])("/deploy/apply/project/detail",e)}function i(e){return Object(n["b"])("/deploy/apply/submit",e)}function a(){return Object(n["a"])("/deploy/apply/project/all")}function l(e){return Object(n["a"])("/deploy/apply/list",e)}function c(e){return Object(n["a"])("/deploy/apply/detail",e)}function u(e){return Object(n["b"])("/deploy/apply/audit",e)}function p(e){return Object(n["b"])("/deploy/apply/update",e)}function s(e){return Object(n["b"])("/deploy/apply/drop",e)}function d(e){return Object(n["a"])("/deploy/apply/rollbacklist",e)}function m(e){return Object(n["b"])("/deploy/build/start",e)}function f(e){return Object(n["a"])("/deploy/build/status",e)}function b(e){return Object(n["b"])("/deploy/build/stop",e)}function _(e){return Object(n["b"])("/deploy/deploy/start",e)}function g(e){return Object(n["a"])("/deploy/deploy/status",e)}function j(e){return Object(n["b"])("/deploy/deploy/stop",e)}function y(e){return Object(n["b"])("/deploy/deploy/rollback",e)}},"7f7f":function(e,t,o){var n=o("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,a="name";a in r||o("9e1e")&&n(r,a,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-162ff1ff.15a23fae.js.map