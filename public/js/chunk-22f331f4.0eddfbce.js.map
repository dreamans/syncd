{"version":3,"sources":["webpack:///./src/api/project.js","webpack:///./src/view/project/Member.vue?88a0","webpack:///src/view/project/Member.vue","webpack:///./src/view/project/Member.vue?d589","webpack:///./src/view/project/Member.vue"],"names":["__webpack_require__","d","__webpack_exports__","newSpaceApi","updateSpaceApi","listSpaceApi","detailSpaceApi","deleteSpaceApi","searchMemberApi","addMemberApi","listMemberApi","removeMemberApi","newProjectApi","updateProjectApi","listProjectApi","switchStatusProjectApi","detailProjectApi","deleteProjectApi","updateBuildScriptApi","updateHookScriptApi","_lib_fetch_js__WEBPACK_IMPORTED_MODULE_0__","data","post","params","get","render","_vm","this","_h","$createElement","_c","_self","spaceId","attrs","shadow","staticClass","type","icon","size","on","click","switchSpaceHandler","_v","_s","$t","staticStyle","min-height","directives","name","rawName","value","expression","spaceDetail","description","$root","CheckPriv","Priv","PROJECT_USER_NEW","span","width","clearable","filterable","remote","loading-text","no-match-text","remote-method","searchMemberHandler","loading","memberLoading","placeholder","model","callback","$$v","memberId","_l","m","key","id","label","username","email","role_name","margin-left","addMemberHandler","_e","tableData","prop","scopedSlots","_u","fn","scope","row","status","align","PROJECT_USER_DEL","$event","deleteHandler","background","layout","current-page","Page","page-size","PageSize","total","Total","current-change","currentChangeHandler","update:currentPage","$set","title","closable","show-icon","DialogSmallWidth","visible","dialogSpaceVisible","update:visible","padding-bottom","change","selectSpaceHandler","s","Substr","staticRenderFns","Membervue_type_script_lang_js_","tableLoading","undefined","spaceLoading","spaceList","memberSearchList","lastSearchTimer","watch","_this","Object","project","then","res","catch","err","PageInit","loadTableData","methods","query","_this2","clearTimeout","setTimeout","keyword","_this3","member_id","space_id","$message","success","code","CODE_ERR_DATA_REPEAT","error","_this4","ConfirmDelete","MessageSuccess","PageReset","_this5","offset","PageOffset","limit","list","loadSpaceList","_this6","initSpaceId","length","mounted","project_Membervue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-22f331f4.0eddfbce.js","sourcesContent":["import {get, post} from '@/lib/fetch.js'\n\nexport function newSpaceApi(data) {\n    return post('/project/space/add', data)\n}\n\nexport function updateSpaceApi(data) {\n    return post('/project/space/update', data)\n}\n\nexport function listSpaceApi(params) {\n    return get('/project/space/list', params)\n}\n\nexport function detailSpaceApi(params) {\n    return get('/project/space/detail', params)\n}\n\nexport function deleteSpaceApi(data) {\n    return post('/project/space/delete', data)\n}\n\nexport function searchMemberApi(params) {\n    return get('/project/member/search', params)\n}\n\nexport function addMemberApi(data) {\n    return post('/project/member/add', data)\n}\n\nexport function listMemberApi(params) {\n    return get('/project/member/list', params)\n}\n\nexport function removeMemberApi(data) {\n    return post('/project/member/remove', data)\n}\n\nexport function newProjectApi(data) {\n    return post('/project/add', data)\n}\n\nexport function updateProjectApi(data) {\n    return post('/project/update', data)\n}\n\nexport function listProjectApi(params) {\n    return get('/project/list', params)\n}\n\nexport function switchStatusProjectApi(data) {\n    return post('/project/switchstatus', data)\n}\n\nexport function detailProjectApi(params) {\n    return get('/project/detail', params)\n}\n\nexport function deleteProjectApi(data) {\n    return post('/project/delete', data)\n}\n\nexport function updateBuildScriptApi(data) {\n    return post('/project/buildscript', data)\n}\n\nexport function updateHookScriptApi(data) {\n    return post('/project/hookscript', data)\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.spaceId)?_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-alert',{staticClass:\"app-btn-group\",attrs:{\"title\":_vm.$t('prompt_message'),\"type\":\"info\",\"closable\":false,\"description\":_vm.$t('project_member_select_space_tips'),\"show-icon\":\"\"}}),_c('div',{staticClass:\"app-btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\",\"size\":\"small\"},on:{\"click\":_vm.switchSpaceHandler}},[_vm._v(_vm._s(_vm.$t('select_project_space')))])],1),_c('div',{staticClass:\"app-divider\"})],1):_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"app-btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\",\"size\":\"small\"},on:{\"click\":_vm.switchSpaceHandler}},[_vm._v(_vm._s(_vm.$t('switch_project_space')))])],1),_c('div',{staticClass:\"app-btn-group\",staticStyle:{\"min-height\":\"30px\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.spaceLoading),expression:\"spaceLoading\"}]},[_c('h4',[_vm._v(_vm._s(this.spaceDetail.name))]),_c('p',{staticClass:\"app-description\"},[_vm._v(_vm._s(this.spaceDetail.description))])])]),_c('div',{staticClass:\"app-divider\"}),(_vm.$root.CheckPriv(_vm.$root.Priv.PROJECT_USER_NEW))?[_c('div',{staticClass:\"app-btn-title\"},[_vm._v(_vm._s(_vm.$t('add_new_member')))]),_c('el-row',{staticClass:\"app-btn-group\"},[_c('el-col',{attrs:{\"span\":10}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"remote\":\"\",\"loading-text\":_vm.$t('looking_for_users'),\"no-match-text\":_vm.$t('user_not_found'),\"remote-method\":_vm.searchMemberHandler,\"loading\":_vm.memberLoading,\"placeholder\":_vm.$t('search_for_users_by_username_and_email')},model:{value:(_vm.memberId),callback:function ($$v) {_vm.memberId=$$v},expression:\"memberId\"}},_vm._l((_vm.memberSearchList),function(m){return _c('el-option',{key:m.id,attrs:{\"value\":m.id,\"label\":m.username + ' - ' + m.email +  ' - ' + m.role_name}})}),1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.addMemberHandler}},[_vm._v(_vm._s(_vm.$t('add')))])],1)],1)]:_vm._e(),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableLoading),expression:\"tableLoading\"}],staticClass:\"app-table\",attrs:{\"size\":\"medium\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"username\",\"width\":\"220\",\"label\":_vm.$t('username')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.username)?_c('span',[_vm._v(_vm._s(scope.row.username))]):_c('span',{staticClass:\"app-line-through\"},[_vm._v(\"已删除\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"width\":\"260\",\"label\":_vm.$t('email')}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":_vm.$t('role')}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"width\":\"100\",\"label\":_vm.$t('status')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status == '1')?_c('span',{staticClass:\"app-color-success\"},[_c('i',{staticClass:\"iconfont icon-unlock\"}),_vm._v(\" \"+_vm._s(_vm.$t('normal'))+\"\\n                    \")]):_c('span',{staticClass:\"app-color-error\"},[_c('i',{staticClass:\"iconfont icon-lock\"}),_vm._v(\" \"+_vm._s(_vm.$t('locking'))+\"\\n                    \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('operate'),\"width\":\"100\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.$root.CheckPriv(_vm.$root.Priv.PROJECT_USER_DEL))?_c('el-button',{staticClass:\"app-danger\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteHandler(scope.row)}}},[_vm._v(_vm._s(_vm.$t('remove')))]):_vm._e()]}}])})],1),_c('el-pagination',{staticClass:\"app-pagination\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.$root.Page,\"page-size\":_vm.$root.PageSize,\"total\":_vm.$root.Total},on:{\"current-change\":_vm.currentChangeHandler,\"update:currentPage\":function($event){_vm.$set(_vm.$root, \"Page\", $event)}}})],2),_c('el-dialog',{attrs:{\"width\":_vm.$root.DialogSmallWidth,\"visible\":_vm.dialogSpaceVisible,\"title\":_vm.$t('select_project_space')},on:{\"update:visible\":function($event){_vm.dialogSpaceVisible=$event}}},[_c('div',{staticStyle:{\"padding-bottom\":\"50px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"size\":\"small\",\"placeholder\":_vm.$t('select_project_space')},on:{\"change\":_vm.selectSpaceHandler},model:{value:(_vm.spaceId),callback:function ($$v) {_vm.spaceId=$$v},expression:\"spaceId\"}},_vm._l((_vm.spaceList),function(s){return _c('el-option',{key:s.id,attrs:{\"value\":s.id,\"label\":_vm.$root.Substr(s.name, 50)}})}),1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <el-card shadow=\"never\" v-if=\"!spaceId\">\n            <el-alert\n            class=\"app-btn-group\"\n            :title=\"$t('prompt_message')\"\n            type=\"info\"\n            :closable=\"false\"\n            :description=\"$t('project_member_select_space_tips')\"\n            show-icon></el-alert>\n            <div class=\"app-btn-group\">\n                <el-button type=\"primary\" @click=\"switchSpaceHandler\" icon=\"el-icon-refresh\" size=\"small\">{{ $t('select_project_space') }}</el-button>\n            </div>\n            <div class=\"app-divider\"></div>\n        </el-card>\n        <el-card shadow=\"never\" v-else>\n            <div class=\"app-btn-group\">\n                <el-button type=\"primary\" @click=\"switchSpaceHandler\" icon=\"el-icon-refresh\" size=\"small\">{{ $t('switch_project_space') }}</el-button>\n            </div>\n            <div class=\"app-btn-group\" style=\"min-height: 30px\">\n                <div v-loading=\"spaceLoading\">\n                    <h4>{{ this.spaceDetail.name }}</h4>\n                    <p class=\"app-description\">{{ this.spaceDetail.description }}</p>\n                </div>\n            </div>\n            <div class=\"app-divider\"></div>\n            <template v-if=\"$root.CheckPriv($root.Priv.PROJECT_USER_NEW)\">\n                <div class=\"app-btn-title\">{{ $t('add_new_member') }}</div>\n                <el-row class=\"app-btn-group\">\n                    <el-col :span=\"10\">\n                        <el-select \n                        v-model=\"memberId\"\n                        style=\"width: 100%;\"\n                        size=\"small\"\n                        clearable\n                        filterable\n                        remote\n                        :loading-text=\"$t('looking_for_users')\"\n                        :no-match-text=\"$t('user_not_found')\"\n                        :remote-method=\"searchMemberHandler\"\n                        :loading=\"memberLoading\"\n                        :placeholder=\"$t('search_for_users_by_username_and_email')\">\n                            <el-option v-for=\"m in memberSearchList\" :key=\"m.id\" :value=\"m.id\" :label=\"m.username + ' - ' + m.email +  ' - ' + m.role_name\"></el-option>\n                        </el-select>\n                    </el-col>\n                    <el-col :span=\"8\">\n                        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"primary\" @click=\"addMemberHandler\">{{ $t('add') }}</el-button>\n                    </el-col>\n                </el-row>\n            </template>\n            <el-table\n                class=\"app-table\"\n                size=\"medium\"\n                v-loading=\"tableLoading\"\n                :data=\"tableData\">\n                <el-table-column prop=\"username\" width=\"220\" :label=\"$t('username')\">\n                    <template slot-scope=\"scope\">\n                        <span v-if=\"scope.row.username\">{{ scope.row.username }}</span>\n                        <span class=\"app-line-through\" v-else>已删除</span>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"email\" width=\"260\" :label=\"$t('email')\"></el-table-column>\n                <el-table-column prop=\"role_name\" :label=\"$t('role')\"></el-table-column>\n                <el-table-column prop=\"status\" width=\"100\" :label=\"$t('status')\">\n                    <template slot-scope=\"scope\">\n                        <span class=\"app-color-success\" v-if=\"scope.row.status == '1'\">\n                            <i class=\"iconfont icon-unlock\"></i> {{ $t('normal') }}\n                        </span>\n                        <span class=\"app-color-error\" v-else>\n                            <i class=\"iconfont icon-lock\"></i> {{ $t('locking') }}\n                        </span>\n                    </template>\n                </el-table-column>\n                <el-table-column :label=\"$t('operate')\" width=\"100\" align=\"right\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                        v-if=\"$root.CheckPriv($root.Priv.PROJECT_USER_DEL)\"\n                        type=\"text\"\n                        icon=\"el-icon-delete\"\n                        class=\"app-danger\"\n                        @click=\"deleteHandler(scope.row)\">{{ $t('remove') }}</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                class=\"app-pagination\"\n                @current-change=\"currentChangeHandler\"\n                :current-page.sync=\"$root.Page\"\n                :page-size=\"$root.PageSize\"\n                :total=\"$root.Total\">\n            </el-pagination>\n        </el-card>\n\n        <el-dialog \n        :width=\"$root.DialogSmallWidth\"\n        :visible.sync=\"dialogSpaceVisible\"\n        :title=\"$t('select_project_space')\">\n            <div style=\"padding-bottom: 50px;\">\n                <el-select filterable @change=\"selectSpaceHandler\" v-model=\"spaceId\" style=\"width: 100%;\" size=\"small\" :placeholder=\"$t('select_project_space')\">\n                    <el-option v-for=\"s in spaceList\" :key=\"s.id\" :value=\"s.id\" :label=\"$root.Substr(s.name, 50)\" ></el-option>\n                </el-select>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { listSpaceApi, detailSpaceApi, searchMemberApi, addMemberApi, listMemberApi, removeMemberApi } from '@/api/project'\nimport Code from '@/lib/code'\nexport default {\n    data() {\n        return {\n            dialogSpaceVisible: false,\n\n            tableData: [],\n            tableLoading: false,\n\n            spaceId: undefined,\n            spaceLoading: false,\n            spaceList: [],\n            spaceDetail: {},\n\n            memberId: undefined,\n            memberLoading: false,\n            memberSearchList: [],\n            lastSearchTimer: null,\n        }\n    },\n    watch: {\n        spaceId() {\n            if (this.spaceId) {\n                this.spaceLoading = true\n                detailSpaceApi({id: this.spaceId}).then(res => {\n                    this.spaceDetail = res\n                    this.spaceLoading = false\n                }).catch(err => {\n                    this.spaceLoading = false\n                })\n                this.$root.PageInit()\n                this.loadTableData()\n            }\n        }\n    },\n    methods: {\n        searchMemberHandler(query) {\n            let vm = this\n            this.memberLoading = true\n            clearTimeout(this.lastSearchTimer)\n            this.lastSearchTimer = setTimeout(() => {\n                searchMemberApi({keyword: query}).then(res => {\n                    if (res) {\n                        this.memberSearchList = res\n                    }\n                    this.memberLoading = false\n                }).catch(err => {\n                    this.memberLoading = false\n                })\n            }, 1000);\n        },\n        addMemberHandler() {\n            if (!this.memberId) {\n                this.$message.error(this.$t('search_and_select_users_before_adding'));\n                return\n            }\n            addMemberApi({member_id: this.memberId, space_id: this.spaceId}).then(res => {\n                this.memberId = undefined\n                this.memberSearchList = []\n                this.$message.success(this.$t('member_added_successfully'));\n                this.$root.PageInit()\n                this.loadTableData()\n            }).catch(err => {\n                if (Code.CODE_ERR_DATA_REPEAT == err.code) {\n                    this.$message.error(this.$t('member_already_exists_do_not_add_repeat'));\n                }\n            })\n        },\n        selectSpaceHandler() {\n            this.dialogSpaceVisible = false\n        },\n        switchSpaceHandler() {\n            this.dialogSpaceVisible = true\n        },\n        deleteHandler(row) {\n            this.$root.ConfirmDelete(() => {\n                removeMemberApi({id: row.id}).then(res => {\n                    this.$root.MessageSuccess()\n                    this.$root.PageReset()\n                    this.loadTableData()\n                })\n            })\n        },\n        currentChangeHandler() {\n            this.loadTableData()\n        },\n        loadTableData() {\n            this.tableLoading = true\n            listMemberApi({space_id: this.spaceId, offset: this.$root.PageOffset(), limit: this.$root.PageSize}).then(res => {\n                this.tableData = res.list\n                this.$root.Total = res.total\n                this.tableLoading = false\n            }).catch(err => {\n                this.tableLoading = false\n            })\n        },\n        loadSpaceList() {\n            listSpaceApi({offset: 0, limit: 999}).then(res => {\n                if (res.list) {\n                    this.spaceList = res.list\n                }\n                this.initSpaceId()\n            })\n        },\n        initSpaceId() {\n            if (this.spaceList.length && !this.spaceId) {\n                this.spaceId = this.spaceList[0].id\n            }\n        },\n    },\n    mounted() {\n        this.loadSpaceList()\n    }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Member.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Member.vue?vue&type=template&id=7197d568&\"\nimport script from \"./Member.vue?vue&type=script&lang=js&\"\nexport * from \"./Member.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Member.vue\"\nexport default component.exports"],"sourceRoot":""}