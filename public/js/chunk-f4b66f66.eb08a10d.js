(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4b66f66"],{4341:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{staticClass:"app-btn-group"},[a("el-col",{attrs:{span:4}},[t.$root.CheckPriv(t.$root.Priv.SERVER_NEW)?a("el-button",{attrs:{type:"primary",size:"medium",icon:"iconfont left small icon-add"},on:{click:t.openAddDialogHandler}},[t._v(t._s(t.$t("add_server")))]):t._e(),t._v("Â \n            ")],1),a("el-col",{attrs:{span:6,offset:14}},[a("el-input",{attrs:{size:"medium",placeholder:t.$t("please_input_keyword_id_or_name")},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchHandler(e):null}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchHandler},slot:"append"})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"app-table",attrs:{size:"medium",data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:t.$t("name")}}),a("el-table-column",{attrs:{prop:"group_name",width:"200",label:t.$t("cluster")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.group_name?a("span",[t._v(t._s(e.row.group_name))]):a("span",{staticClass:"app-line-through"},[t._v(t._s(t.$t("deleted")))])]}}])}),a("el-table-column",{attrs:{prop:"ip",width:"200",label:"IP/HOST"}}),a("el-table-column",{attrs:{prop:"ssh_port",width:"100",label:"SSH Port"}}),a("el-table-column",{attrs:{label:t.$t("operate"),width:"180",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.$root.CheckPriv(t.$root.Priv.SERVER_EDIT)?a("el-button",{attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(a){t.openEditDialogHandler(e.row)}}},[t._v(t._s(t.$t("edit")))]):t._e(),t.$root.CheckPriv(t.$root.Priv.SERVER_DEL)?a("el-button",{staticClass:"app-danger",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){t.deleteHandler(e.row)}}},[t._v(t._s(t.$t("delete")))]):t._e()]}}])})],1),a("el-pagination",{staticClass:"app-pagination",attrs:{background:"",layout:"prev, pager, next","current-page":t.$root.Page,"page-size":t.$root.PageSize,total:t.$root.Total},on:{"current-change":t.currentChangeHandler,"update:currentPage":function(e){t.$set(t.$root,"Page",e)}}})],1),a("el-dialog",{attrs:{width:t.$root.DialogSmallWidth,title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogCloseHandler}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"app-dialog"},[a("el-form",{ref:"dialogRef",staticClass:"app-form",attrs:{model:t.dialogForm,size:"medium","label-width":"120px"}},[a("el-form-item",{attrs:{label:t.$t("belong_cluster"),prop:"group_id",rules:[{required:!0,message:this.$t("belong_cluster_cannot_empty"),trigger:"blur"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:t.$t("keyword_search")},model:{value:t.dialogForm.group_id,callback:function(e){t.$set(t.dialogForm,"group_id",e)},expression:"dialogForm.group_id"}},t._l(t.serverGroupList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:t.$t("server_name"),prop:"name",rules:[{required:!0,message:this.$t("name_cannot_empty"),trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:t.$t("please_input_server_name"),autocomplete:"off"},model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"IP/HOST",prop:"ip",rules:[{required:!0,message:this.$t("IP_HOST_cannot_empty"),trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:t.$t("please_input_server_IP_HOST"),autocomplete:"off"},model:{value:t.dialogForm.ip,callback:function(e){t.$set(t.dialogForm,"ip",e)},expression:"dialogForm.ip"}})],1),a("el-form-item",{attrs:{label:t.$t("SSH_port"),prop:"ssh_port",rules:[{required:!0,message:this.$t("SSH_port_cannot_empty"),trigger:"blur"}]}},[a("el-input",{staticClass:"app-input-mini",attrs:{maxlength:"5",autocomplete:"off"},model:{value:t.dialogForm.ssh_port,callback:function(e){t.$set(t.dialogForm,"ssh_port",e)},expression:"dialogForm.ssh_port"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.dialogCloseHandler}},[t._v(t._s(t.$t("cancel")))]),a("el-button",{attrs:{loading:t.btnLoading,size:"small",type:"primary"},on:{click:t.dialogSubmitHandler}},[t._v(t._s(t.$t("enter")))])],1)],1)])],1)},i=[],r=a("aa22"),n={data:function(){return{searchInput:"",dialogVisible:!1,dialogTitle:"",dialogForm:{},dialogLoading:!1,btnLoading:!1,tableData:[],tableLoading:!1,serverGroupList:[]}},methods:{searchHandler:function(){this.$root.PageInit(),this.loadTableData()},openAddDialogHandler:function(){this.dialogVisible=!0,this.dialogTitle=this.$t("add_server"),this.loadServerGroupList()},openEditDialogHandler:function(t){var e=this;this.dialogVisible=!0,this.dialogTitle=this.$t("edit_server_info"),this.dialogLoading=!0,this.loadServerGroupList(),Object(r["d"])({id:t.id}).then(function(t){e.dialogLoading=!1,e.dialogForm=t}).catch(function(t){e.dialogCloseHandler()})},dialogCloseHandler:function(){this.dialogVisible=!1,this.dialogLoading=!1,this.btnLoading=!1,this.$refs.dialogRef.resetFields(),this.dialogForm={ssh_port:22}},deleteHandler:function(t){var e=this;this.$root.ConfirmDelete(function(){Object(r["b"])({id:t.id}).then(function(t){e.$root.MessageSuccess(),e.$root.PageReset(),e.loadTableData()})})},currentChangeHandler:function(){this.loadTableData()},dialogSubmitHandler:function(){var t=this;this.$refs.dialogRef.validate(function(e){if(!e)return!1;var a;t.btnLoading=!0,a=t.dialogForm.id?r["j"]:r["h"],a(t.dialogForm).then(function(e){t.$root.MessageSuccess(function(){t.dialogCloseHandler(),t.btnLoading=!1,t.loadTableData()})}).catch(function(e){t.btnLoading=!1})})},loadTableData:function(){var t=this;this.tableLoading=!0,Object(r["f"])({keyword:this.searchInput,offset:this.$root.PageOffset(),limit:this.$root.PageSize}).then(function(e){t.tableData=e.list,t.$root.Total=e.total,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1})},loadServerGroupList:function(){var t=this;Object(r["e"])({offset:0,limit:999}).then(function(e){e.list&&e.list.length>0&&(t.serverGroupList=e.list)})}},mounted:function(){this.$root.PageInit(),this.loadTableData()}},l=n,s=a("2877"),d=Object(s["a"])(l,o,i,!1,null,null,null);d.options.__file="Server.vue";e["default"]=d.exports},aa22:function(t,e,a){"use strict";a.d(e,"g",function(){return i}),a.d(e,"e",function(){return r}),a.d(e,"a",function(){return n}),a.d(e,"c",function(){return l}),a.d(e,"i",function(){return s}),a.d(e,"h",function(){return d}),a.d(e,"j",function(){return u}),a.d(e,"f",function(){return c}),a.d(e,"b",function(){return p}),a.d(e,"d",function(){return g});var o=a("ead3");function i(t){return Object(o["b"])("/server/group/add",t)}function r(t){return Object(o["a"])("/server/group/list",t)}function n(t){return Object(o["b"])("/server/group/delete",t)}function l(t){return Object(o["a"])("/server/group/detail",t)}function s(t){return Object(o["b"])("/server/group/update",t)}function d(t){return Object(o["b"])("/server/add",t)}function u(t){return Object(o["b"])("/server/update",t)}function c(t){return Object(o["a"])("/server/list",t)}function p(t){return Object(o["b"])("/server/delete",t)}function g(t){return Object(o["a"])("/server/detail",t)}}}]);
//# sourceMappingURL=chunk-f4b66f66.eb08a10d.js.map